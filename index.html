<!DOCTYPE html>
<html lang="ar" dir="rtl" manifest="manifest.appcache">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#d4af37">
    <meta name="description" content="ูููู ูุดููุงุช ุงููุจุงุจ - ุฃุดูู ุงููุดููุงุช">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/660.png-550x550.png.webp">
    
    <title>ูุดููุงุช ุงููุจุงุจ</title>
    <link rel="stylesheet" href="style.css?v=10">
    <script src="force-update.js?v=10"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>๐ฅ ูุดููุงุช ุงููุจุงุจ</h1>
                <p class="tagline">ุฃุดูู ุงููุดููุงุช ุนูู ุงููุญู</p>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-category="all">ุงููู</button>
            <button class="tab-btn" data-category="kabab">ูุจุงุจ</button>
            <button class="tab-btn" data-category="chicken">ุฏุฌุงุฌ</button>
            <button class="tab-btn" data-category="mixed">ูุดูู</button>
            <button class="tab-btn" data-category="plates">ุตุญูู</button>
            <a href="device-info.html" class="tab-btn device-info-tab">๐ฑ ุจูุงูุงุช ุงูุฌูุงุฒ</a>
            <a href="search.html" class="tab-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; color: #fff !important; border-color: #667eea !important;">๐ ุงูุจุญุซ</a>
            <a href="photos.html" class="tab-btn" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%) !important; color: #fff !important; border-color: #f39c12 !important;">๐ธ ุงูุตูุฑ</a>
        </nav>

        <!-- Menu Items -->
        <main class="menu-container" id="menuContainer">
            <!-- Items will be dynamically loaded -->
        </main>

        <!-- Cart Button -->
        <button class="cart-btn" id="cartBtn">
            <span class="cart-icon">๐</span>
            <span class="cart-count" id="cartCount">0</span>
        </button>

        <!-- Cart Modal -->
        <div class="modal" id="cartModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ุณูุฉ ุงูุทูุจุงุช</h2>
                    <button class="close-btn" id="closeCart">&times;</button>
                </div>
                <div class="modal-body" id="cartItems">
                    <p class="empty-cart">ุงูุณูุฉ ูุงุฑุบุฉ</p>
                </div>
                <div class="modal-footer">
                    <div class="total">
                        <span>ุงูุฅุฌูุงูู:</span>
                        <span id="totalPrice">0 ุฑูุงู</span>
                    </div>
                    <button class="checkout-btn" id="checkoutBtn">ุฅุชูุงู ุงูุทูุจ</button>
                </div>
            </div>
        </div>

        <!-- Item Detail Modal -->
        <div class="modal" id="itemModal">
            <div class="modal-content">
                <button class="close-btn" id="closeItem">&times;</button>
                <div class="modal-body" id="itemDetails"></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Register Service Worker with Auto Update
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => {
                    console.log('Service Worker registered');
                    
                    // Check for updates every 10 seconds
                    setInterval(() => {
                        reg.update();
                    }, 10000);
                    
                    // Force update on new version
                    reg.addEventListener('updatefound', () => {
                        const newWorker = reg.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // New version available, reload page
                                if (confirm('ููุฌุฏ ุชุญุฏูุซ ุฌุฏูุฏ! ูู ุชุฑูุฏ ุงูุชุญุฏูุซ ุงูุขูุ')) {
                                    window.location.reload();
                                }
                            }
                        });
                    });
                })
                .catch(err => console.log('Service Worker registration failed', err));
            
            // Force reload on controller change
            let refreshing;
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                if (refreshing) return;
                refreshing = true;
                window.location.reload();
            });
        }
    </script>
</body>
</html>